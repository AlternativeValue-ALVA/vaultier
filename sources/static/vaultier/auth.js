Vaultier.AuthLoginController=Ember.Controller.extend({latestUser:null,rememberOptions:[{ttl:0,text:"Do not remember"},{ttl:864e5,text:"Remember for one day"},{ttl:6048e5,text:"Remember for one week"},{ttl:26784e5,text:"Remember for one month"},{ttl:31536e6,text:"Remember for one year"}]}),Vaultier.AuthLoginView=Ember.View.extend({templateName:"Auth/AuthLogin",layoutName:"Layout/LayoutStandard",didInsertElement:function(){var e=$(this.get("element")),t=e.find(".vlt-login-key"),r=this.controller;t.on("change",function(e){var t=FileAPI.getFiles(e);FileAPI.readAsText(t[0],function(e){"load"==e.type&&(r.set("privateKey",e.result),r.set("filename",t[0].name))})})}}),Vaultier.AuthLoginRoute=Ember.Route.extend({setupController:function(e){if(this.get("config.FT_FEATURES.dev_shared_key")){var t=this.get("auth"),r=t.generateKeys(),i=r.privateKey;e.set("email",this.get("config.FT_FEATURES.dev_email")),e.set("privateKey",i)}this.loadRemebered()},loadRemebered:function(){var e=this.get("auth"),t=e.getRememberedUser(),r=this.get("controller");t?(r.set("latestUser",!0),r.set("email",t.email),r.set("privateKey",t.privateKey),r.set("ttl",t.ttl)):r.set("latestUser",!1)},actions:{switchUser:function(){var e=this.get("auth");e.rememberUser(null),this.loadRemebered()},loginUser:function(){ApplicationLoader.showLoader();{var e=this.get("controller"),t=e.get("email"),r=e.get("ttl"),i=e.get("privateKey"),o=this.get("auth");o.login(t,i,!0).then(function(){o.rememberUser(t,i,r),$.notify("You have been successfully logged in.","success")}.bind(this)).catch(function(){o.rememberUser(null),this.loadRemebered(),ApplicationLoader.hideLoader(),$.notify("We are sorry, but your login failed","error")}.bind(this))}}}});
"use strict";Vaultier.LostKey=RL.Model.extend(Vaultier.CreatedUpdatedMixin,{email:RL.attr("string"),recover_type:RL.attr("integer"),hash:RL.attr("string"),public_key:RL.attr("key"),memberships:RL.hasMany("Vaultier.LostKeyMemberships"),recoverType:new Utils.ConstantList({REBUILD:{value:1,text:"REBUILD"},DISABLE:{value:2,text:"DISABLE"}})}),Vaultier.LostKeyMemberships=RL.Model.extend({workspace_name:RL.attr("string"),is_recoverable:RL.attr("boolean")});
"use strict";Vaultier.AuthLostKeyIndexRoute=Ember.Route.extend({model:function(){return this.get("store").createRecord("LostKey")},setupController:function(e,t){e.set("content",t),e.set("error",!1)},actions:{sendRecoveryKeyRequest:function(){var e=this.get("controller"),t=e.get("content"),o=t.saveRecord().then(function(){this.transitionTo("AuthLostKey.success")}.bind(this)).catch(function(){e.set("error",!0),$.notify("An error just happened please try again","error")}.bind(this));ApplicationLoader.promise(o)}}}),Vaultier.AuthLostKeyIndexController=Ember.Controller.extend({email:null,error:!1}),Vaultier.AuthLostKeyIndexView=Ember.View.extend({templateName:"Auth/AuthLostKeyIndex",layoutName:"Layout/LayoutStandard"}),Vaultier.AuthLostKeySuccessView=Ember.View.extend({templateName:"Auth/AuthLostKeySuccess",layoutName:"Layout/LayoutStandard"});
var RegisterProps=Ember.Object.extend({nextButtonTitle:!1,nextButtonDisable:!1,keysReady:!1,keys:null,loginButtonHidden:!1,transitionAfterRegister:!1,defaultWorkspace:!1,defaultVault:!1});RegisterProps.reopenClass(Utils.Singleton);var BaseRegisterController=Ember.Controller.extend({props:RegisterProps.current()});Vaultier.AuthRegisterView=Ember.View.extend({templateName:"Auth/AuthRegister",layoutName:"Layout/LayoutStandard",TabView:Ember.View.extend({classNameBindings:"isActive:active".w(),tagName:"li",isActive:function(){var e=this.get("tab"),t=this.get("parentView.controller.controllers.application.currentPath"),r=t.split(".")[t.split(".").length-1];return e==r}.property("parentView.controller.controllers.application.currentPath")})}),Vaultier.AuthRegisterController=BaseRegisterController.extend({needs:["application"]}),Vaultier.AuthRegisterRoute=Ember.Route.extend({beforeModel:function(e){e.router.replaceWith(this.get("auth").get("isAuthenticated")?"AuthRegister.sum":"AuthRegister.before")},model:function(){var e=this.get("auth");return e.get("isAuthenticated")?e.get("user"):this.get("store").createRecord("User")},deactivate:function(){var e=this.modelFor(e);e&&this.get("store").unloadRecord(e)}}),Vaultier.AuthRegisterIndexRoute=Ember.Route.extend({beforeModel:function(e){e.router.replaceWith(this.get("auth").get("isAuthenticated")?"AuthRegister.sum":"AuthRegister.before")}}),Vaultier.AuthRegisterBeforeRoute=Ember.Route.extend({step:"AuthRegisterBefore",beforeModel:function(e){this.get("auth").get("isAuthenticated")&&e.router.replaceWith("AuthRegister.sum")},setupController:function(e){e.set("props.loginButtonHidden",!1),e.set("props.nextButtonDisabled",!1),e.set("props.nextButtonTitle",null)},renderTemplate:function(){this.render(this.step,{outlet:"AuthRegister"})},actions:{next:function(){this.transitionTo("AuthRegister.keys")}}}),Vaultier.AuthRegisterBeforeView=Ember.View.extend({templateName:"Auth/AuthRegisterBefore"}),Vaultier.AuthRegisterBeforeController=BaseRegisterController.extend(),Vaultier.AuthRegisterKeysController=BaseRegisterController.extend(),Vaultier.AuthRegisterKeysRoute=Ember.Route.extend({step:"AuthRegisterKeys",beforeModel:function(e){this.get("auth").get("isAuthenticated")&&e.router.replaceWith("AuthRegister.sum")},renderTemplate:function(){this.render(this.step,{outlet:"AuthRegister"})},actions:{next:function(){this.transitionTo("AuthRegister.creds")},downloadKey:function(){var e=this.get("controller"),t=new Blob([e.get("props.keys.privateKey")],{type:"text/plain;charset=utf-8"});saveAs(t,"vaultier.key"),e.set("props.nextButtonDisabled",!1)}},setupController:function(e){if(e.set("props.loginButtonHidden",!0),e.set("props.nextButtonTitle",null),!e.get("props.keysReady")){e.set("props.nextButtonDisabled",!0);var t=this.get("auth");t.generateKeys(function(t){e.set("props.keys",t),e.set("props.keysReady",!0)}.bind(this))}}}),Vaultier.AuthRegisterKeysView=Ember.View.extend({templateName:"Auth/AuthRegisterKeys"}),Vaultier.AuthRegisterCredsRoute=Ember.Route.extend({step:"AuthRegisterCreds",newuserinit:null,beforeModel:function(e){this.get("auth").get("isAuthenticated")&&e.router.replaceWith("AuthRegister.sum")},renderTemplate:function(){this.render(this.step,{outlet:"AuthRegister"})},setupController:function(e){this._super.apply(this,arguments),e.set("props.loginButtonHidden",!0),e.set("props.nextButtonDisabled",!1),e.set("props.nextButtonTitle","Submit your credentials");var t=this.modelFor("AuthRegister");e.set("content",t),e.get("props.keysReady")||this.transitionTo("AuthRegister")},actions:{next:function(){var e=this.get("auth"),t=this.get("controller"),r=t.get("content"),i=t.get("props.keys");r.set("public_key",i.publicKey),t.set("props.nextButtonDisabled",!0);var s=r.saveRecord().then(function(t){return console.log(t),e.login(r.get("email"),i.privateKey,!1).then(function(){e.rememberUser(null),this.transitionTo("AuthRegister.sum")}.bind(this))}.bind(this)).catch(function(e){return console.log(e),t.set("errors",Ember.Object.create(e.errors)),t.set("props.nextButtonDisabled",!1),$.notify("We are sorry, but your account cannot be created","error"),Ember.RSVP.reject(e)}.bind(this)).then(function(){return this.get("newuserinit").initializeUser()}.bind(this)).then(function(e){t.get("props").setProperties(e)}.bind(this));ApplicationLoader.promise(s)}}}),Vaultier.AuthRegisterCredsController=BaseRegisterController.extend({init:function(){this._super(arguments),this.set("props.nextButtonTitle","Create your account")}}),Vaultier.AuthRegisterCredsView=Ember.View.extend({templateName:"Auth/AuthRegisterCreds"}),Vaultier.AuthRegisterSumRoute=Ember.Route.extend({step:"AuthRegisterSum",renderTemplate:function(){this.render(this.step,{outlet:"AuthRegister"})},setupController:function(e){var t=this.modelFor("AuthRegister");e.set("content",t),e.set("props.loginButtonHidden",!0),e.set("props.nextButtonDisabled",!1),e.set("props.nextButtonTitle","Start using vaultier")},actions:{downloadKey:function(){var e=new Blob([this.get("auth.privateKey")],{type:"text/plain;charset=utf-8"});saveAs(e,"vaultier.key")},next:function(){var e=this.get("controller.props.transitionAfterRegister");e?e():this.transitionTo("index")}}}),Vaultier.AuthRegisterSumController=BaseRegisterController.extend({auth:null}),Vaultier.AuthRegisterSumView=Ember.View.extend({templateName:"Auth/AuthRegisterSum"});
"use strict";Vaultier.AuthLostKeyRecoveryRoute=Ember.Route.extend({model:function(t){var e=this.get("store").find("LostKey",{id:t.id,hash:t.hash}).then(function(e){return e.set("hash",t.hash),e});return e},afterModel:function(){this.transitionTo("AuthLostKeyRecovery.reset")}});
"use strict";Vaultier.AuthLostKeyRecoveryResetRoute=Ember.Route.extend({actions:{rebuildKey:function(){Vaultier.confirmModal(this,"This action can not be undone. Are you sure?",function(){this.transitionTo("AuthLostKeyRecovery.rebuild")}.bind(this))},disableKey:function(){var e=this.modelFor("AuthLostKeyRecoveryReset");Vaultier.confirmModal(this,"This action can not be undone. Are you sure that you want to continue?",function(){e.set("public_key","-"),e.set("recover_type",Vaultier.LostKey.proto().recoverType.DISABLE.value);var t=e.saveRecord().then(function(){this.transitionTo("AuthLostKeyRecovery.disable")}.bind(this)).catch(function(e){$.notify("How embarrassing! There was an error, please try again later","error"),this.get("errors").consoleError(e)}.bind(this));ApplicationLoader.promise(t)}.bind(this))}}}),Vaultier.AuthLostKeyRecoveryResetController=Ember.Controller.extend({needs:["application"],memberships:[],created_by:null,public_key:null}),Vaultier.AuthLostKeyRecoveryResetView=Ember.View.extend({templateName:"Auth/AuthLostKeyRecoveryReset",layoutName:"Layout/LayoutStandard"});
"use strict";Vaultier.AuthLostKeyRecoveryRebuildRoute=Ember.Route.extend({actions:{save:function(e,t){this.set("controller.keys",e);var o=this.modelFor("AuthLostKeyRecoveryRebuild");o.set("public_key",e.publicKey),o.set("recover_type",Vaultier.LostKey.proto().recoverType.REBUILD.value);var r=o.saveRecord().then(function(t){this.get("auth").login(t.created_by.email,e.privateKey,!1),$.notify("You have successfully rebuild your new private key","success"),this.transitionTo("AuthLostKeyRecovery.success")}.bind(this)).catch(function(e){$.notify("There was an error during update of your key, please try again later","error"),this.get("errors").consoleError(e)}.bind(this));ApplicationLoader.promise(r),t.promise=r}}}),Vaultier.AuthLostKeyRecoveryRebuildController=Ember.Controller.extend({needs:["AuthLostKeyRecovery"],keys:null}),Vaultier.AuthLostKeyRecoveryRebuildView=Ember.View.extend({templateName:"Auth/AuthLostKeyRecoveryRebuild",layoutName:"Layout/LayoutStandard"}),Vaultier.AuthLostKeyRecoverySuccessView=Ember.View.extend({templateName:"Auth/AuthLostKeyRecoverySuccess",layoutName:"Layout/LayoutStandard"});
"use strict";Vaultier.AuthLostKeyRecoveryDisableRoute=Ember.Route.extend({actions:{disable:function(){var e=this.modelFor("AuthLostKeyRecoveryDisable");e.set("public_key","-"),e.set("recover_type",Vaultier.LostKey.proto().recoverType.DISABLE.value);var t=e.saveRecord().then(function(){this.transitionTo("AuthRegister")}.bind(this)).catch(function(e){$.notify("How embarrassing! There was an error during update of your key, please try again later","error"),this.get("errors").consoleError(e)}.bind(this));ApplicationLoader.promise(t)}}}),Vaultier.AuthLostKeyRecoveryDisableController=Ember.Controller.extend({needs:["AuthLostKeyRecovery"]}),Vaultier.AuthLostKeyRecoveryDisableView=Ember.View.extend({templateName:"Auth/AuthLostKeyRecoveryDisable",layoutName:"Layout/LayoutStandard"});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkF1dGhMb2dpbi5qcyIsIkxvc3RLZXkuanMiLCJBdXRoTG9zdEtleUluZGV4LmpzIiwiQXV0aFJlZ2lzdGVyLmpzIiwiQXV0aExvc3RLZXlSZWNvdmVyeUluZGV4LmpzIiwiQXV0aExvc3RLZXlSZWNvdmVyeVJlc2V0LmpzIiwiQXV0aExvc3RLZXlSZWNvdmVyeVJlYnVpbGQuanMiLCJBdXRoTG9zdEtleVJlY292ZXJ5RGlzYWJsZS5qcyJdLCJuYW1lcyI6WyJWYXVsdGllciIsIkF1dGhMb2dpbkNvbnRyb2xsZXIiLCJFbWJlciIsIkNvbnRyb2xsZXIiLCJleHRlbmQiLCJsYXRlc3RVc2VyIiwicmVtZW1iZXJPcHRpb25zIiwidHRsIiwidGV4dCIsIkF1dGhMb2dpblZpZXciLCJWaWV3IiwidGVtcGxhdGVOYW1lIiwibGF5b3V0TmFtZSIsImRpZEluc2VydEVsZW1lbnQiLCJlbCIsIiQiLCJ0aGlzIiwiZ2V0IiwiaW5wdXQiLCJmaW5kIiwiY29udHJvbGxlciIsIm9uIiwiZSIsImZpbGVzIiwiRmlsZUFQSSIsImdldEZpbGVzIiwicmVhZEFzVGV4dCIsImV2dCIsInR5cGUiLCJzZXQiLCJyZXN1bHQiLCJuYW1lIiwiQXV0aExvZ2luUm91dGUiLCJSb3V0ZSIsInNldHVwQ29udHJvbGxlciIsImN0cmwiLCJhdXRoIiwia2V5cyIsImdlbmVyYXRlS2V5cyIsInBrZXkiLCJwcml2YXRlS2V5IiwibG9hZFJlbWViZXJlZCIsInVzZXIiLCJnZXRSZW1lbWJlcmVkVXNlciIsImVtYWlsIiwiYWN0aW9ucyIsInN3aXRjaFVzZXIiLCJyZW1lbWJlclVzZXIiLCJsb2dpblVzZXIiLCJBcHBsaWNhdGlvbkxvYWRlciIsInNob3dMb2FkZXIiLCJsb2dpbiIsInRoZW4iLCJub3RpZnkiLCJiaW5kIiwiY2F0Y2giLCJoaWRlTG9hZGVyIiwiTG9zdEtleSIsIlJMIiwiTW9kZWwiLCJDcmVhdGVkVXBkYXRlZE1peGluIiwiYXR0ciIsInJlY292ZXJfdHlwZSIsImhhc2giLCJwdWJsaWNfa2V5IiwibWVtYmVyc2hpcHMiLCJoYXNNYW55IiwicmVjb3ZlclR5cGUiLCJVdGlscyIsIkNvbnN0YW50TGlzdCIsIlJFQlVJTEQiLCJ2YWx1ZSIsIkRJU0FCTEUiLCJMb3N0S2V5TWVtYmVyc2hpcHMiLCJ3b3Jrc3BhY2VfbmFtZSIsImlzX3JlY292ZXJhYmxlIiwiQXV0aExvc3RLZXlJbmRleFJvdXRlIiwibW9kZWwiLCJjcmVhdGVSZWNvcmQiLCJzZW5kUmVjb3ZlcnlLZXlSZXF1ZXN0IiwicmVjb3JkIiwicHJvbWlzZSIsInNhdmVSZWNvcmQiLCJ0cmFuc2l0aW9uVG8iLCJBdXRoTG9zdEtleUluZGV4Q29udHJvbGxlciIsImVycm9yIiwiQXV0aExvc3RLZXlJbmRleFZpZXciLCJBdXRoTG9zdEtleVN1Y2Nlc3NWaWV3IiwiUmVnaXN0ZXJQcm9wcyIsIk9iamVjdCIsIm5leHRCdXR0b25UaXRsZSIsIm5leHRCdXR0b25EaXNhYmxlIiwia2V5c1JlYWR5IiwibG9naW5CdXR0b25IaWRkZW4iLCJ0cmFuc2l0aW9uQWZ0ZXJSZWdpc3RlciIsImRlZmF1bHRXb3Jrc3BhY2UiLCJkZWZhdWx0VmF1bHQiLCJyZW9wZW5DbGFzcyIsIlNpbmdsZXRvbiIsIkJhc2VSZWdpc3RlckNvbnRyb2xsZXIiLCJwcm9wcyIsImN1cnJlbnQiLCJBdXRoUmVnaXN0ZXJWaWV3IiwiVGFiVmlldyIsImNsYXNzTmFtZUJpbmRpbmdzIiwidyIsInRhZ05hbWUiLCJpc0FjdGl2ZSIsInRhYiIsInBhdGgiLCJyb3V0ZSIsInNwbGl0IiwibGVuZ3RoIiwicHJvcGVydHkiLCJBdXRoUmVnaXN0ZXJDb250cm9sbGVyIiwibmVlZHMiLCJBdXRoUmVnaXN0ZXJSb3V0ZSIsImJlZm9yZU1vZGVsIiwidHJhbnNpdGlvbiIsInJvdXRlciIsInJlcGxhY2VXaXRoIiwiZGVhY3RpdmF0ZSIsIm1vZGVsRm9yIiwidW5sb2FkUmVjb3JkIiwiQXV0aFJlZ2lzdGVySW5kZXhSb3V0ZSIsIkF1dGhSZWdpc3RlckJlZm9yZVJvdXRlIiwic3RlcCIsInJlbmRlclRlbXBsYXRlIiwicmVuZGVyIiwib3V0bGV0IiwibmV4dCIsIkF1dGhSZWdpc3RlckJlZm9yZVZpZXciLCJBdXRoUmVnaXN0ZXJCZWZvcmVDb250cm9sbGVyIiwiQXV0aFJlZ2lzdGVyS2V5c0NvbnRyb2xsZXIiLCJBdXRoUmVnaXN0ZXJLZXlzUm91dGUiLCJkb3dubG9hZEtleSIsImJsb2IiLCJCbG9iIiwic2F2ZUFzIiwiQXV0aFJlZ2lzdGVyS2V5c1ZpZXciLCJBdXRoUmVnaXN0ZXJDcmVkc1JvdXRlIiwibmV3dXNlcmluaXQiLCJfc3VwZXIiLCJhcHBseSIsImFyZ3VtZW50cyIsInB1YmxpY0tleSIsInJlc3BvbnNlIiwiY29uc29sZSIsImxvZyIsImVycm9ycyIsImNyZWF0ZSIsIlJTVlAiLCJyZWplY3QiLCJpbml0aWFsaXplVXNlciIsIm5ld3VzZXJ2YWx1ZXMiLCJzZXRQcm9wZXJ0aWVzIiwiQXV0aFJlZ2lzdGVyQ3JlZHNDb250cm9sbGVyIiwiaW5pdCIsIkF1dGhSZWdpc3RlckNyZWRzVmlldyIsIkF1dGhSZWdpc3RlclN1bVJvdXRlIiwiQXV0aFJlZ2lzdGVyU3VtQ29udHJvbGxlciIsIkF1dGhSZWdpc3RlclN1bVZpZXciLCJBdXRoTG9zdEtleVJlY292ZXJ5Um91dGUiLCJwYXJhbXMiLCJsb3N0a2V5IiwiaWQiLCJhZnRlck1vZGVsIiwiQXV0aExvc3RLZXlSZWNvdmVyeVJlc2V0Um91dGUiLCJyZWJ1aWxkS2V5IiwiY29uZmlybU1vZGFsIiwiZGlzYWJsZUtleSIsInByb3RvIiwiY29uc29sZUVycm9yIiwiQXV0aExvc3RLZXlSZWNvdmVyeVJlc2V0Q29udHJvbGxlciIsImNyZWF0ZWRfYnkiLCJBdXRoTG9zdEtleVJlY292ZXJ5UmVzZXRWaWV3IiwiQXV0aExvc3RLZXlSZWNvdmVyeVJlYnVpbGRSb3V0ZSIsInNhdmUiLCJjb250ZW50IiwiQXV0aExvc3RLZXlSZWNvdmVyeVJlYnVpbGRDb250cm9sbGVyIiwiQXV0aExvc3RLZXlSZWNvdmVyeVJlYnVpbGRWaWV3IiwiQXV0aExvc3RLZXlSZWNvdmVyeVN1Y2Nlc3NWaWV3IiwiQXV0aExvc3RLZXlSZWNvdmVyeURpc2FibGVSb3V0ZSIsImRpc2FibGUiLCJBdXRoTG9zdEtleVJlY292ZXJ5RGlzYWJsZUNvbnRyb2xsZXIiLCJBdXRoTG9zdEtleVJlY292ZXJ5RGlzYWJsZVZpZXciXSwibWFwcGluZ3MiOiJBQUFBQSxTQUFTQyxvQkFBc0JDLE1BQU1DLFdBQVdDLFFBQzVDQyxXQUFZLEtBQ1pDLGtCQUNLQyxJQUFLLEVBQUdDLEtBQU0sb0JBQ2RELElBQUssTUFBa0JDLEtBQU0seUJBQzdCRCxJQUFLLE9BQXNCQyxLQUFNLDBCQUNqQ0QsSUFBSyxRQUF1QkMsS0FBTSwyQkFDbENELElBQUssUUFBd0JDLEtBQU0sNEJBSTVDUixTQUFTUyxjQUFnQlAsTUFBTVEsS0FBS04sUUFDaENPLGFBQWMsaUJBQ2RDLFdBQVksd0JBRVpDLGlCQUFrQixXQUNkLEdBQUlDLEdBQUtDLEVBQUVDLEtBQUtDLElBQUksWUFDaEJDLEVBQVFKLEVBQUdLLEtBQUssa0JBQ2hCQyxFQUFhSixLQUFLSSxVQUV0QkYsR0FBTUcsR0FBRyxTQUFVLFNBQVVDLEdBRXpCLEdBQUlDLEdBQVFDLFFBQVFDLFNBQVNILEVBQzdCRSxTQUFRRSxXQUFXSCxFQUFNLEdBQUksU0FBVUksR0FDbkIsUUFBWkEsRUFBSUMsT0FFSlIsRUFBV1MsSUFBSSxhQUFjRixFQUFJRyxRQUNqQ1YsRUFBV1MsSUFBSSxXQUFZTixFQUFNLEdBQUdRLGNBT3hEL0IsU0FBU2dDLGVBQWlCOUIsTUFBTStCLE1BQU03QixRQUNsQzhCLGdCQUFpQixTQUFVQyxHQUV2QixHQUFJbkIsS0FBS0MsSUFBSSxxQ0FBdUMsQ0FDaEQsR0FBSW1CLEdBQU9wQixLQUFLQyxJQUFJLFFBQ2hCb0IsRUFBT0QsRUFBS0UsZUFDWkMsRUFBT0YsRUFBS0csVUFDaEJMLEdBQUtOLElBQUksUUFBU2IsS0FBS0MsSUFBSSxpQ0FDM0JrQixFQUFLTixJQUFJLGFBQWNVLEdBSTNCdkIsS0FBS3lCLGlC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YUFBYyxLQUMxQnFKLEVBQVFySixJQUFJLGVBQWdCN0IsU0FBU3lELFFBQVFrSCxRQUFReEcsWUFBcUIsUUFBRUksTUFFNUUsSUFBSVUsR0FBVWlHLEVBQVFoRyxhQUNqQjlCLEtBQUssV0FDRnBDLEtBQUttRSxhQUFhLGlCQUNwQjdCLEtBQUt0QyxPQUNOdUMsTUFBTSxTQUFVOEIsR0FDYnRFLEVBQUVzQyxPQUFPLHlGQUEwRixTQUNuR3JDLEtBQUtDLElBQUksVUFBVTJKLGFBQWF2RixJQUNsQy9CLEtBQUt0QyxNQUNYaUMsbUJBQWtCZ0MsUUFBUUEsT0FLdENqRixTQUFTd0wscUNBQXVDdEwsTUFBTUMsV0FBV0MsUUFDN0QrRyxPQUFRLHlCQUdabkgsU0FBU3lMLCtCQUFpQ3ZMLE1BQU1RLEtBQUtOLFFBQ2pETyxhQUFjLGtDQUNkQyxXQUFZIiwiZmlsZSI6ImF1dGguanMiLCJzb3VyY2VzQ29udGVudCI6WyJWYXVsdGllci5BdXRoTG9naW5Db250cm9sbGVyID0gRW1iZXIuQ29udHJvbGxlci5leHRlbmQoe1xyXG4gICAgbGF0ZXN0VXNlcjogbnVsbCxcclxuICAgIHJlbWVtYmVyT3B0aW9uczogW1xyXG4gICAgICAgIHt0dGw6IDAsIHRleHQ6ICdEbyBub3QgcmVtZW1iZXInfSxcclxuICAgICAgICB7dHRsOiAyNCAqIDM2MDAgKiAxMDAwLCB0ZXh0OiAnUmVtZW1iZXIgZm9yIG9uZSBkYXknfSxcclxuICAgICAgICB7dHRsOiA3ICogMjQgKiAzNjAwICogMTAwMCwgdGV4dDogJ1JlbWVtYmVyIGZvciBvbmUgd2Vlayd9LFxyXG4gICAgICAgIHt0dGw6IDMxICogMjQgKiAzNjAwICogMTAwMCwgdGV4dDogJ1JlbWVtYmVyIGZvciBvbmUgbW9udGgnfSxcclxuICAgICAgICB7dHRsOiAzNjUgKiAyNCAqIDM2MDAgKiAxMDAwLCB0ZXh0OiAnUmVtZW1iZXIgZm9yIG9uZSB5ZWFyJ31cclxuICAgIF1cclxufSk7XHJcblxyXG5WYXVsdGllci5BdXRoTG9naW5WaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoe1xyXG4gICAgdGVtcGxhdGVOYW1lOiAnQXV0aC9BdXRoTG9naW4nLFxyXG4gICAgbGF5b3V0TmFtZTogJ0xheW91dC9MYXlvdXRTdGFuZGFyZCcsXHJcblxyXG4gICAgZGlkSW5zZXJ0RWxlbWVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbCA9ICQodGhpcy5nZXQoJ2VsZW1lbnQnKSk7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gZWwuZmluZCgnLnZsdC1sb2dpbi1rZXknKTtcclxuICAgICAgICB2YXIgY29udHJvbGxlciA9IHRoaXMuY29udHJvbGxlcjtcclxuXHJcbiAgICAgICAgaW5wdXQub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZmlsZXMgPSBGaWxlQVBJLmdldEZpbGVzKGUpO1xyXG4gICAgICAgICAgICBGaWxlQVBJLnJlYWRBc1RleHQoZmlsZXNbMF0sIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChldnQudHlwZSA9PSAnbG9hZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTdWNjZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5zZXQoJ3ByaXZhdGVLZXknLCBldnQucmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLnNldCgnZmlsZW5hbWUnLCBmaWxlc1swXS5uYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59KTtcclxuXHJcblZhdWx0aWVyLkF1dGhMb2dpblJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHtcclxuICAgIHNldHVwQ29udHJvbGxlcjogZnVuY3Rpb24gKGN0cmwpIHtcclxuICAgICAgICAvLyAgIHRlc3RpbmdcclxuICAgICAgICBpZiAodGhpcy5nZXQoJ2NvbmZpZy5GVF9GRUFUVVJFUy5kZXZfc2hhcmVkX2tleScpICkge1xyXG4gICAgICAgICAgICB2YXIgYXV0aCA9IHRoaXMuZ2V0KCdhdXRoJyk7XHJcbiAgICAgICAgICAgIHZhciBrZXlzID0gYXV0aC5nZW5lcmF0ZUtleXMoKTtcclxuICAgICAgICAgICAgdmFyIHBrZXkgPSBrZXlzLnByaXZhdGVLZXlcclxuICAgICAgICAgICAgY3RybC5zZXQoJ2VtYWlsJywgdGhpcy5nZXQoJ2NvbmZpZy5GVF9GRUFUVVJFUy5kZXZfZW1haWwnKSk7XHJcbiAgICAgICAgICAgIGN0cmwuc2V0KCdwcml2YXRlS2V5JywgcGtleSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHJlbWVtYmVyaW5nXHJcbiAgICAgICAgdGhpcy5sb2FkUmVtZWJlcmVkKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGxvYWRSZW1lYmVyZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYXV0aCA9IHRoaXMuZ2V0KCdhdXRoJyk7XHJcbiAgICAgICAgdmFyIHVzZXIgPSBhdXRoLmdldFJlbWVtYmVyZWRVc2VyKCk7XHJcbiAgICAgICAgdmFyIGN0cmwgPSB0aGlzLmdldCgnY29udHJvbGxlcicpO1xyXG4gICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgIGN0cmwuc2V0KCdsYXRlc3RVc2VyJywgdHJ1ZSlcclxuICAgICAgICAgICAgY3RybC5zZXQoJ2VtYWlsJywgdXNlci5lbWFpbCk7XHJcbiAgICAgICAgICAgIGN0cmwuc2V0KCdwcml2YXRlS2V5JywgdXNlci5wcml2YXRlS2V5KTtcclxuICAgICAgICAgICAgY3RybC5zZXQoJ3R0bCcsIHVzZXIudHRsKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdHJsLnNldCgnbGF0ZXN0VXNlcicsIGZhbHNlKVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgYWN0aW9uczoge1xyXG4gICAgICAgIHN3aXRjaFVzZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGF1dGggPSB0aGlzLmdldCgnYXV0aCcpO1xyXG4gICAgICAgICAgICBhdXRoLnJlbWVtYmVyVXNlcihudWxsKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkUmVtZWJlcmVkKCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbG9naW5Vc2VyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIEFwcGxpY2F0aW9uTG9hZGVyLnNob3dMb2FkZXIoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjdHJsID0gdGhpcy5nZXQoJ2NvbnRyb2xsZXInKTtcclxuICAgICAgICAgICAgdmFyIGVtYWlsID0gY3RybC5nZXQoJ2VtYWlsJyk7XHJcbiAgICAgICAgICAgIHZhciB0dGwgPSBjdHJsLmdldCgndHRsJyk7XHJcbiAgICAgICAgICAgIHZhciBwcml2YXRlS2V5ID0gY3RybC5nZXQoJ3ByaXZhdGVLZXknKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhdXRoID0gdGhpcy5nZXQoJ2F1dGgnKTtcclxuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBhdXRoXHJcbiAgICAgICAgICAgICAgICAubG9naW4oZW1haWwsIHByaXZhdGVLZXksIHRydWUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodXNlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dGgucmVtZW1iZXJVc2VyKGVtYWlsLCBwcml2YXRlS2V5LCB0dGwpXHJcbiAgICAgICAgICAgICAgICAgICAgJC5ub3RpZnkoJ1lvdSBoYXZlIGJlZW4gc3VjY2Vzc2Z1bGx5IGxvZ2dlZCBpbi4nLCAnc3VjY2VzcycpO1xyXG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBhdXRoLnJlbWVtYmVyVXNlcihudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZFJlbWViZXJlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIEFwcGxpY2F0aW9uTG9hZGVyLmhpZGVMb2FkZXIoKVxyXG4gICAgICAgICAgICAgICAgICAgICQubm90aWZ5KCdXZSBhcmUgc29ycnksIGJ1dCB5b3VyIGxvZ2luIGZhaWxlZCcsICdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59KTtcclxuXHJcbiIsIid1c2Ugc3RyaWN0JztcblxuXG5WYXVsdGllci5Mb3N0S2V5ID0gUkwuTW9kZWwuZXh0ZW5kKFxuICAgIFZhdWx0aWVyLkNyZWF0ZWRVcGRhdGVkTWl4aW4sXG4gICAge1xuICAgICAgICBlbWFpbDogUkwuYXR0cignc3RyaW5nJyksXG4gICAgICAgIHJlY292ZXJfdHlwZTogUkwuYXR0cignaW50ZWdlcicpLFxuICAgICAgICBoYXNoOiBSTC5hdHRyKCdzdHJpbmcnKSxcbiAgICAgICAgcHVibGljX2tleTogUkwuYXR0cigna2V5JyksXG4gICAgICAgIG1lbWJlcnNoaXBzOiBSTC5oYXNNYW55KCdWYXVsdGllci5Mb3N0S2V5TWVtYmVyc2hpcHMnKSxcbiAgICAgICAgcmVjb3ZlclR5cGU6IG5ldyBVdGlscy5Db25zdGFudExpc3Qoe1xuICAgICAgICAgICAgJ1JFQlVJTEQnOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IDEsXG4gICAgICAgICAgICAgICAgdGV4dDogJ1JFQlVJTEQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ0RJU0FCTEUnOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IDIsXG4gICAgICAgICAgICAgICAgdGV4dDogJ0RJU0FCTEUnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSk7XG5cblZhdWx0aWVyLkxvc3RLZXlNZW1iZXJzaGlwcyA9IFJMLk1vZGVsLmV4dGVuZCh7XG4gICAgd29ya3NwYWNlX25hbWU6IFJMLmF0dHIoJ3N0cmluZycpLFxuICAgIGlzX3JlY292ZXJhYmxlOiBSTC5hdHRyKCdib29sZWFuJylcbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5WYXVsdGllci5BdXRoTG9zdEtleUluZGV4Um91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoe1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBMb3N0S2V5IG1vZGVsIGluc3RhbmNlLCBtdXN0IGJlIGRvbmUgYnkgaGFuZFxuICAgICAqIGJlY2F1c2Ugb2YgdGhlIGRpZmZlcmVudCBuYW1lXG4gICAgICovXG4gICAgbW9kZWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdzdG9yZScpLmNyZWF0ZVJlY29yZCgnTG9zdEtleScpO1xuICAgIH0sXG5cbiAgICBzZXR1cENvbnRyb2xsZXI6IGZ1bmN0aW9uKGN0cmwsIG1vZGVsKSB7XG4gICAgICAgIGN0cmwuc2V0KCdjb250ZW50JywgbW9kZWwpO1xuICAgICAgICBjdHJsLnNldCgnZXJyb3InLCBmYWxzZSk7XG4gICAgfSxcblxuICAgIGFjdGlvbnM6IHtcbiAgICAgICAgc2VuZFJlY292ZXJ5S2V5UmVxdWVzdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGN0cmwgPSB0aGlzLmdldCgnY29udHJvbGxlcicpO1xuICAgICAgICAgICAgdmFyIHJlY29yZCA9IGN0cmwuZ2V0KCdjb250ZW50Jyk7XG5cbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gcmVjb3JkLnNhdmVSZWNvcmQoKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25UbygnQXV0aExvc3RLZXkuc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgKS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY3RybC5zZXQoJ2Vycm9yJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICQubm90aWZ5KCdBbiBlcnJvciBqdXN0IGhhcHBlbmVkIHBsZWFzZSB0cnkgYWdhaW4nLCAnZXJyb3InKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgQXBwbGljYXRpb25Mb2FkZXIucHJvbWlzZShwcm9taXNlKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5WYXVsdGllci5BdXRoTG9zdEtleUluZGV4Q29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgICBlbWFpbDogbnVsbCxcbiAgICBlcnJvcjogZmFsc2Vcbn0pO1xuXG5WYXVsdGllci5BdXRoTG9zdEtleUluZGV4VmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHtcbiAgICB0ZW1wbGF0ZU5hbWU6ICdBdXRoL0F1dGhMb3N0S2V5SW5kZXgnLFxuICAgIGxheW91dE5hbWU6ICdMYXlvdXQvTGF5b3V0U3RhbmRhcmQnXG59KTtcblxuVmF1bHRpZXIuQXV0aExvc3RLZXlTdWNjZXNzVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHtcbiAgICB0ZW1wbGF0ZU5hbWU6ICdBdXRoL0F1dGhMb3N0S2V5U3VjY2VzcycsXG4gICAgbGF5b3V0TmFtZTogJ0xheW91dC9MYXlvdXRTdGFuZGFyZCdcbn0pOyIsIi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vLy8gU2hhcmVkIGNsYXNzZXNcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbnZhciBSZWdpc3RlclByb3BzID0gRW1iZXIuT2JqZWN0LmV4dGVuZCh7XHJcbiAgICBuZXh0QnV0dG9uVGl0bGU6IGZhbHNlLFxyXG4gICAgbmV4dEJ1dHRvbkRpc2FibGU6IGZhbHNlLFxyXG4gICAga2V5c1JlYWR5OiBmYWxzZSxcclxuICAgIGtleXM6IG51bGwsXHJcbiAgICBsb2dpbkJ1dHRvbkhpZGRlbjogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIFN0b3JlcyB0cmFuc2l0aW9uIGNyZWF0ZWQgYnkgbmV3dXNlcmluaXQgc2VydmljZSB0byByZWRpcmVjdCB0byBwcm9wZXIgcGFnZSBhZnRlciBzdWNjZXNzIHJlZ2lzdHJhdGlvblxyXG4gICAgICovXHJcbiAgICB0cmFuc2l0aW9uQWZ0ZXJSZWdpc3RlcjogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIFN0b3JlcyBkZWZhdWx0IHdvcmtzcGFjZSBpZiBjcmVhdGVkIGJ5IG5ld3VzZXJpbml0c2VydmljZVxyXG4gICAgICovXHJcbiAgICBkZWZhdWx0V29ya3NwYWNlOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogU3RvcmVzIGRlZmF1bHQgdmF1bHQgaWYgY3JlYXRlZCBieSBuZXd1c2VyaW5pdHNlcnZpY2VcclxuICAgICAqL1xyXG4gICAgZGVmYXVsdFZhdWx0OiBmYWxzZVxyXG5cclxufSk7XHJcblxyXG5SZWdpc3RlclByb3BzLnJlb3BlbkNsYXNzKFV0aWxzLlNpbmdsZXRvbik7XHJcblxyXG52YXIgQmFzZVJlZ2lzdGVyQ29udHJvbGxlciA9IEVtYmVyLkNvbnRyb2xsZXIuZXh0ZW5kKHtcclxuICAgIHByb3BzOiBSZWdpc3RlclByb3BzLmN1cnJlbnQoKVxyXG59KTtcclxuXHJcblZhdWx0aWVyLkF1dGhSZWdpc3RlclZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7XHJcbiAgICB0ZW1wbGF0ZU5hbWU6ICdBdXRoL0F1dGhSZWdpc3RlcicsXHJcbiAgICBsYXlvdXROYW1lOiAnTGF5b3V0L0xheW91dFN0YW5kYXJkJyxcclxuXHJcbiAgICBUYWJWaWV3OiBFbWJlci5WaWV3LmV4dGVuZCh7XHJcbiAgICAgICAgY2xhc3NOYW1lQmluZGluZ3M6ICdpc0FjdGl2ZTphY3RpdmUnLncoKSxcclxuICAgICAgICB0YWdOYW1lOiAnbGknLFxyXG4gICAgICAgIGlzQWN0aXZlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0YWIgPSB0aGlzLmdldCgndGFiJyk7XHJcbiAgICAgICAgICAgIHZhciBwYXRoID0gdGhpcy5nZXQoJ3BhcmVudFZpZXcuY29udHJvbGxlci5jb250cm9sbGVycy5hcHBsaWNhdGlvbi5jdXJyZW50UGF0aCcpO1xyXG4gICAgICAgICAgICB2YXIgcm91dGUgPSBwYXRoLnNwbGl0KCcuJylbcGF0aC5zcGxpdCgnLicpLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICByZXR1cm4gdGFiID09IHJvdXRlO1xyXG4gICAgICAgIH0ucHJvcGVydHkoJ3BhcmVudFZpZXcuY29udHJvbGxlci5jb250cm9sbGVycy5hcHBsaWNhdGlvbi5jdXJyZW50UGF0aCcpXHJcbiAgICB9KVxyXG59KTtcclxuXHJcblZhdWx0aWVyLkF1dGhSZWdpc3RlckNvbnRyb2xsZXIgPSBCYXNlUmVnaXN0ZXJDb250cm9sbGVyLmV4dGVuZCh7XHJcbiAgICBuZWVkczogWydhcHBsaWNhdGlvbiddXHJcbn0pO1xyXG5cclxuVmF1bHRpZXIuQXV0aFJlZ2lzdGVyUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoe1xyXG4gICAgYmVmb3JlTW9kZWw6IGZ1bmN0aW9uICh0cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ2V0KCdhdXRoJykuZ2V0KCdpc0F1dGhlbnRpY2F0ZWQnKSkge1xyXG4gICAgICAgICAgICB0cmFuc2l0aW9uLnJvdXRlci5yZXBsYWNlV2l0aCgnQXV0aFJlZ2lzdGVyLnN1bScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRyYW5zaXRpb24ucm91dGVyLnJlcGxhY2VXaXRoKCdBdXRoUmVnaXN0ZXIuYmVmb3JlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBtb2RlbDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBhdXRoID0gdGhpcy5nZXQoJ2F1dGgnKTtcclxuICAgICAgICBpZiAoYXV0aC5nZXQoJ2lzQXV0aGVudGljYXRlZCcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdXRoLmdldCgndXNlcicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldCgnc3RvcmUnKS5jcmVhdGVSZWNvcmQoJ1VzZXInKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGRlYWN0aXZhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdXNlciA9IHRoaXMubW9kZWxGb3IodXNlcik7XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXQoJ3N0b3JlJykudW5sb2FkUmVjb3JkKHVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0pO1xyXG5cclxuVmF1bHRpZXIuQXV0aFJlZ2lzdGVySW5kZXhSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7XHJcbiAgICBiZWZvcmVNb2RlbDogZnVuY3Rpb24gKHRyYW5zaXRpb24pIHtcclxuICAgICAgICBpZiAodGhpcy5nZXQoJ2F1dGgnKS5nZXQoJ2lzQXV0aGVudGljYXRlZCcpKSB7XHJcbiAgICAgICAgICAgIHRyYW5zaXRpb24ucm91dGVyLnJlcGxhY2VXaXRoKCdBdXRoUmVnaXN0ZXIuc3VtJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHJhbnNpdGlvbi5yb3V0ZXIucmVwbGFjZVdpdGgoJ0F1dGhSZWdpc3Rlci5iZWZvcmUnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vLy8gU1RFUDEgLSBCZWZvcmVcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcblZhdWx0aWVyLkF1dGhSZWdpc3RlckJlZm9yZVJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHtcclxuICAgIHN0ZXA6ICdBdXRoUmVnaXN0ZXJCZWZvcmUnLFxyXG5cclxuICAgIGJlZm9yZU1vZGVsOiBmdW5jdGlvbiAodHJhbnNpdGlvbikge1xyXG4gICAgICAgIGlmICh0aGlzLmdldCgnYXV0aCcpLmdldCgnaXNBdXRoZW50aWNhdGVkJykpIHtcclxuICAgICAgICAgICAgdHJhbnNpdGlvbi5yb3V0ZXIucmVwbGFjZVdpdGgoJ0F1dGhSZWdpc3Rlci5zdW0nKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHNldHVwQ29udHJvbGxlcjogZnVuY3Rpb24gKGN0cmwpIHtcclxuICAgICAgICBjdHJsLnNldCgncHJvcHMubG9naW5CdXR0b25IaWRkZW4nLCBmYWxzZSk7XHJcbiAgICAgICAgY3RybC5zZXQoJ3Byb3BzLm5leHRCdXR0b25EaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICAgICBjdHJsLnNldCgncHJvcHMubmV4dEJ1dHRvblRpdGxlJywgbnVsbClcclxuICAgIH0sXHJcblxyXG4gICAgcmVuZGVyVGVtcGxhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcih0aGlzLnN0ZXAsIHsgb3V0bGV0OiAnQXV0aFJlZ2lzdGVyJ30pXHJcbiAgICB9LFxyXG5cclxuICAgIGFjdGlvbnM6IHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvblRvKCdBdXRoUmVnaXN0ZXIua2V5cycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7XHJcblxyXG5WYXVsdGllci5BdXRoUmVnaXN0ZXJCZWZvcmVWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoe1xyXG4gICAgdGVtcGxhdGVOYW1lOiAnQXV0aC9BdXRoUmVnaXN0ZXJCZWZvcmUnXHJcbn0pO1xyXG5cclxuVmF1bHRpZXIuQXV0aFJlZ2lzdGVyQmVmb3JlQ29udHJvbGxlciA9IEJhc2VSZWdpc3RlckNvbnRyb2xsZXIuZXh0ZW5kKCk7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLy8vIFNURVAyIC0ga2V5c1xyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuVmF1bHRpZXIuQXV0aFJlZ2lzdGVyS2V5c0NvbnRyb2xsZXIgPSBCYXNlUmVnaXN0ZXJDb250cm9sbGVyLmV4dGVuZCgpO1xyXG5cclxuVmF1bHRpZXIuQXV0aFJlZ2lzdGVyS2V5c1JvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHtcclxuICAgIHN0ZXA6ICdBdXRoUmVnaXN0ZXJLZXlzJyxcclxuXHJcbiAgICBiZWZvcmVNb2RlbDogZnVuY3Rpb24gKHRyYW5zaXRpb24pIHtcclxuICAgICAgICBpZiAodGhpcy5nZXQoJ2F1dGgnKS5nZXQoJ2lzQXV0aGVudGljYXRlZCcpKSB7XHJcbiAgICAgICAgICAgIHRyYW5zaXRpb24ucm91dGVyLnJlcGxhY2VXaXRoKCdBdXRoUmVnaXN0ZXIuc3VtJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICByZW5kZXJUZW1wbGF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyKHRoaXMuc3RlcCwgeyBvdXRsZXQ6ICdBdXRoUmVnaXN0ZXInfSlcclxuICAgIH0sXHJcblxyXG4gICAgYWN0aW9uczoge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uVG8oJ0F1dGhSZWdpc3Rlci5jcmVkcycpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGRvd25sb2FkS2V5OiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgY3RybCA9IHRoaXMuZ2V0KCdjb250cm9sbGVyJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBzdGFydCBkb3dubG9hZFxyXG4gICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjdHJsLmdldCgncHJvcHMua2V5cy5wcml2YXRlS2V5JyldLCB7dHlwZTogXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLThcIn0pO1xyXG4gICAgICAgICAgICBzYXZlQXMoYmxvYiwgXCJ2YXVsdGllci5rZXlcIik7XHJcblxyXG4gICAgICAgICAgICAvL2VuYWJsZSBuZXh0IGJ1dHRvblxyXG4gICAgICAgICAgICBjdHJsLnNldCgncHJvcHMubmV4dEJ1dHRvbkRpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgc2V0dXBDb250cm9sbGVyOiBmdW5jdGlvbiAoY3RybCkge1xyXG4gICAgICAgIGN0cmwuc2V0KCdwcm9wcy5sb2dpbkJ1dHRvbkhpZGRlbicsIHRydWUpO1xyXG4gICAgICAgIGN0cmwuc2V0KCdwcm9wcy5uZXh0QnV0dG9uVGl0bGUnLCBudWxsKVxyXG5cclxuICAgICAgICBpZiAoIWN0cmwuZ2V0KCdwcm9wcy5rZXlzUmVhZHknKSkge1xyXG4gICAgICAgICAgICBjdHJsLnNldCgncHJvcHMubmV4dEJ1dHRvbkRpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHZhciBhdXRoID0gdGhpcy5nZXQoJ2F1dGgnKTtcclxuICAgICAgICAgICAgYXV0aC5nZW5lcmF0ZUtleXMoZnVuY3Rpb24gKGtleXMpIHtcclxuICAgICAgICAgICAgICAgIGN0cmwuc2V0KCdwcm9wcy5rZXlzJywga2V5cyk7XHJcbiAgICAgICAgICAgICAgICBjdHJsLnNldCgncHJvcHMua2V5c1JlYWR5JywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSk7XHJcblxyXG5WYXVsdGllci5BdXRoUmVnaXN0ZXJLZXlzVmlldyA9IEVtYmVyLlZpZXcuZXh0ZW5kKHtcclxuICAgIHRlbXBsYXRlTmFtZTogJ0F1dGgvQXV0aFJlZ2lzdGVyS2V5cydcclxufSk7XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLy8vIFNURVAzIC0gQ3JlZHNcclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcblxyXG5WYXVsdGllci5BdXRoUmVnaXN0ZXJDcmVkc1JvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHtcclxuICAgIHN0ZXA6ICdBdXRoUmVnaXN0ZXJDcmVkcycsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWZlcmVuY2UgdG8gc2VydmljZSBuZXd1c2VyaW5pdCB3aGljaCBpcyB1c2VkIHRvIGluaXRpYWxpemUgdXNlciBlbnZpcm9ubWVudFxyXG4gICAgICogYWZ0ZXIgc3VjY2Vzc2Z1bGwgcmVnaXN0cmF0aW9uXHJcbiAgICAgKiBAREkgc2VydmljZTpuZXd1c2VyaW5pdFxyXG4gICAgICovXHJcbiAgICBuZXd1c2VyaW5pdDogbnVsbCxcclxuXHJcbiAgICBiZWZvcmVNb2RlbDogZnVuY3Rpb24gKHRyYW5zaXRpb24pIHtcclxuICAgICAgICBpZiAodGhpcy5nZXQoJ2F1dGgnKS5nZXQoJ2lzQXV0aGVudGljYXRlZCcpKSB7XHJcbiAgICAgICAgICAgIHRyYW5zaXRpb24ucm91dGVyLnJlcGxhY2VXaXRoKCdBdXRoUmVnaXN0ZXIuc3VtJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICByZW5kZXJUZW1wbGF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyKHRoaXMuc3RlcCwgeyBvdXRsZXQ6ICdBdXRoUmVnaXN0ZXInfSlcclxuICAgIH0sXHJcblxyXG4gICAgc2V0dXBDb250cm9sbGVyOiBmdW5jdGlvbiAoY3RybCkge1xyXG4gICAgICAgIHRoaXMuX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblxyXG4gICAgICAgIGN0cmwuc2V0KCdwcm9wcy5sb2dpbkJ1dHRvbkhpZGRlbicsIHRydWUpO1xyXG4gICAgICAgIGN0cmwuc2V0KCdwcm9wcy5uZXh0QnV0dG9uRGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgY3RybC5zZXQoJ3Byb3BzLm5leHRCdXR0b25UaXRsZScsICdTdWJtaXQgeW91ciBjcmVkZW50aWFscycpO1xyXG5cclxuICAgICAgICAvLyBwcmVwYXJlIHVzZXIgbW9kZWxcclxuICAgICAgICB2YXIgdXNlciA9IHRoaXMubW9kZWxGb3IoJ0F1dGhSZWdpc3RlcicpO1xyXG5cclxuICAgICAgICAvLyB0ZXN0aW5nXHJcbi8vICAgICAgICB2YXIgdSA9ICdqYW4nICsgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMDAwKSArICdAcmNsaWNrLmN6JztcclxuLy8gICAgICAgIHVzZXIuc2V0UHJvcGVydGllcyh7XHJcbi8vICAgICAgICAgICAgZW1haWw6IHUsXHJcbi8vICAgICAgICAgICAgbmlja25hbWU6IHVcclxuLy8gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjdHJsLnNldCgnY29udGVudCcsIHVzZXIpO1xyXG5cclxuICAgICAgICAvLyBjaGVjayBpZiBrZXlzLCBvdGhlcndpc2UgZ28gdG8gc3RlcCAxXHJcbiAgICAgICAgaWYgKCFjdHJsLmdldCgncHJvcHMua2V5c1JlYWR5JykpIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uVG8oJ0F1dGhSZWdpc3RlcicpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgYWN0aW9uczoge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIHByZXBhcmUgZGF0YVxyXG4gICAgICAgICAgICB2YXIgYXV0aCA9IHRoaXMuZ2V0KCdhdXRoJyk7XHJcbiAgICAgICAgICAgIHZhciBjdHJsID0gdGhpcy5nZXQoJ2NvbnRyb2xsZXInKTtcclxuICAgICAgICAgICAgdmFyIHVzZXIgPSBjdHJsLmdldCgnY29udGVudCcpO1xyXG4gICAgICAgICAgICB2YXIga2V5cyA9IGN0cmwuZ2V0KCdwcm9wcy5rZXlzJyk7XHJcblxyXG4gICAgICAgICAgICAvLyB1cGRhdGUgbW9kZWxcclxuICAgICAgICAgICAgdXNlci5zZXQoJ3B1YmxpY19rZXknLCBrZXlzLnB1YmxpY0tleSk7XHJcblxyXG4gICAgICAgICAgICAvLyBwcmVhcHJlIGNvbnRyb2xsZXJcclxuICAgICAgICAgICAgY3RybC5zZXQoJ3Byb3BzLm5leHRCdXR0b25EaXNhYmxlZCcsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgLy8gcmVnaXN0ZXIgcHJvbWlzZVxyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHVzZXJcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBzYXZlIHJlY29yZFxyXG4gICAgICAgICAgICAgICAgLnNhdmVSZWNvcmQoKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGxvZ2luXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1dGgubG9naW4odXNlci5nZXQoJ2VtYWlsJyksIGtleXMucHJpdmF0ZUtleSwgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGgucmVtZW1iZXJVc2VyKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uVG8oJ0F1dGhSZWdpc3Rlci5zdW0nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB1bnN1Y2Nlc3NmdWxsIGxvZ2luXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9ycykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9ycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3RybC5zZXQoJ2Vycm9ycycsIEVtYmVyLk9iamVjdC5jcmVhdGUoZXJyb3JzLmVycm9ycykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0cmwuc2V0KCdwcm9wcy5uZXh0QnV0dG9uRGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5ub3RpZnkoJ1dlIGFyZSBzb3JyeSwgYnV0IHlvdXIgYWNjb3VudCBjYW5ub3QgYmUgY3JlYXRlZCcsICdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBFbWJlci5SU1ZQLnJlamVjdChlcnJvcnMpO1xyXG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBkZWZhdWx0IHVzZXIgZW52aXJvbm1lbnRcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ25ld3VzZXJpbml0JykuaW5pdGlhbGl6ZVVzZXIoKTtcclxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBzYXZlIHRyYW5zaXRpb24gYW5kIGNyZWF0ZWQgd29ya3NwYWNlIGFuZCB2YXVsdFxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG5ld3VzZXJ2YWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdHJsLmdldCgncHJvcHMnKS5zZXRQcm9wZXJ0aWVzKG5ld3VzZXJ2YWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgICAgIEFwcGxpY2F0aW9uTG9hZGVyLnByb21pc2UocHJvbWlzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuXHJcblZhdWx0aWVyLkF1dGhSZWdpc3RlckNyZWRzQ29udHJvbGxlciA9IEJhc2VSZWdpc3RlckNvbnRyb2xsZXIuZXh0ZW5kKHtcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcihhcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMuc2V0KCdwcm9wcy5uZXh0QnV0dG9uVGl0bGUnLCAnQ3JlYXRlIHlvdXIgYWNjb3VudCcpO1xyXG4gICAgfVxyXG5cclxufSk7XHJcblxyXG5WYXVsdGllci5BdXRoUmVnaXN0ZXJDcmVkc1ZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7XHJcbiAgICB0ZW1wbGF0ZU5hbWU6ICdBdXRoL0F1dGhSZWdpc3RlckNyZWRzJ1xyXG59KTtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vLy8gU1RFUDQgLSBTdW1cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcblZhdWx0aWVyLkF1dGhSZWdpc3RlclN1bVJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHtcclxuICAgIHN0ZXA6ICdBdXRoUmVnaXN0ZXJTdW0nLFxyXG5cclxuICAgIHJlbmRlclRlbXBsYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIodGhpcy5zdGVwLCB7IG91dGxldDogJ0F1dGhSZWdpc3Rlcid9KTtcclxuICAgIH0sXHJcblxyXG4gICAgc2V0dXBDb250cm9sbGVyOiBmdW5jdGlvbiAoY3RybCkge1xyXG4gICAgICAgIC8vIHByZXBhcmUgdXNlciBtb2RlbFxyXG4gICAgICAgIHZhciB1c2VyID0gdGhpcy5tb2RlbEZvcignQXV0aFJlZ2lzdGVyJylcclxuICAgICAgICBjdHJsLnNldCgnY29udGVudCcsIHVzZXIpO1xyXG5cclxuICAgICAgICBjdHJsLnNldCgncHJvcHMubG9naW5CdXR0b25IaWRkZW4nLCB0cnVlKTtcclxuICAgICAgICBjdHJsLnNldCgncHJvcHMubmV4dEJ1dHRvbkRpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgIGN0cmwuc2V0KCdwcm9wcy5uZXh0QnV0dG9uVGl0bGUnLCAnU3RhcnQgdXNpbmcgdmF1bHRpZXInKTtcclxuICAgIH0sXHJcblxyXG4gICAgYWN0aW9uczoge1xyXG5cclxuICAgICAgICBkb3dubG9hZEtleTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBzdGFydCBkb3dubG9hZFxyXG4gICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFt0aGlzLmdldCgnYXV0aC5wcml2YXRlS2V5JyldLCB7dHlwZTogXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLThcIn0pO1xyXG4gICAgICAgICAgICBzYXZlQXMoYmxvYiwgXCJ2YXVsdGllci5rZXlcIik7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBnZXQgdHJhbnNpdGlvbiBmdW5jdGlvbiBjcmVhdGVkIGJ5IG5ld3VzZXJpbml0IHNlcnZpY2UgdGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHRyYW5zaXRpb24gdG8gcHJvcGVyIHBhZ2UgYWZ0ZXIgcmVnaXN0cmF0aW9uXHJcbiAgICAgICAgICAgIC8vIGluIGNhc2UgdXNlciByZWZyZXNoZXMgdGhlIHBhZ2UgdHJhbnNpdGlvbiBpcyBub3QgYXZhaWxhYmxlIGFueW1vcmUsIGluIHRoYXQgY2FzZSB1c2VyIGlzIHJlZGlyZWN0ZWQgdG8gaW5kZXhcclxuICAgICAgICAgICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzLmdldCgnY29udHJvbGxlci5wcm9wcy50cmFuc2l0aW9uQWZ0ZXJSZWdpc3RlcicpO1xyXG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uVG8oJ2luZGV4Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuXHJcblZhdWx0aWVyLkF1dGhSZWdpc3RlclN1bUNvbnRyb2xsZXIgPSBCYXNlUmVnaXN0ZXJDb250cm9sbGVyLmV4dGVuZCh7XHJcbiAgICBhdXRoOiBudWxsXHJcbn0pO1xyXG5cclxuXHJcblZhdWx0aWVyLkF1dGhSZWdpc3RlclN1bVZpZXcgPSBFbWJlci5WaWV3LmV4dGVuZCh7XHJcbiAgICB0ZW1wbGF0ZU5hbWU6ICdBdXRoL0F1dGhSZWdpc3RlclN1bSdcclxufSk7XHJcbiIsIid1c2Ugc3RyaWN0JztcblxuVmF1bHRpZXIuQXV0aExvc3RLZXlSZWNvdmVyeVJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHtcblxuICAgIG1vZGVsOiBmdW5jdGlvbiAocGFyYW1zLCB0cmFuc2l0aW9uKSB7XG4gICAgICAgIHZhciBsb3N0a2V5ID0gdGhpcy5nZXQoJ3N0b3JlJylcbiAgICAgICAgICAgIC5maW5kKCdMb3N0S2V5Jywge2lkOiBwYXJhbXMuaWQsIGhhc2g6IHBhcmFtcy5oYXNofSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICByZXNwb25zZS5zZXQoJ2hhc2gnLCBwYXJhbXMuaGFzaCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGxvc3RrZXk7XG4gICAgfSxcblxuICAgIGFmdGVyTW9kZWw6IGZ1bmN0aW9uIChtb2RlbCwgdHJhbnNpdGlvbikge1xuICAgICAgICB0aGlzLnRyYW5zaXRpb25UbygnQXV0aExvc3RLZXlSZWNvdmVyeS5yZXNldCcpO1xuICAgIH1cbn0pO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cblZhdWx0aWVyLkF1dGhMb3N0S2V5UmVjb3ZlcnlSZXNldFJvdXRlID0gRW1iZXIuUm91dGUuZXh0ZW5kKHtcbiAgICBhY3Rpb25zOiB7XG5cbiAgICAgICAgcmVidWlsZEtleTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgVmF1bHRpZXIuY29uZmlybU1vZGFsKHRoaXMsICdUaGlzIGFjdGlvbiBjYW4gbm90IGJlIHVuZG9uZS4gQXJlIHlvdSBzdXJlPycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25UbygnQXV0aExvc3RLZXlSZWNvdmVyeS5yZWJ1aWxkJyk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9LFxuICAgICAgICBkaXNhYmxlS2V5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbW9kZWwgPSB0aGlzLm1vZGVsRm9yKCdBdXRoTG9zdEtleVJlY292ZXJ5UmVzZXQnKTtcbiAgICAgICAgICAgIFZhdWx0aWVyLmNvbmZpcm1Nb2RhbCh0aGlzLCAnVGhpcyBhY3Rpb24gY2FuIG5vdCBiZSB1bmRvbmUuIEFyZSB5b3Ugc3VyZSB0aGF0IHlvdSB3YW50IHRvIGNvbnRpbnVlPycsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgIG1vZGVsLnNldCgncHVibGljX2tleScsICctJyk7IC8vIFRoaXMgY2FuJ3QgYmUgYW4gZW1wdHkgc3RyaW5nXG4gICAgICAgICAgICAgICAgbW9kZWwuc2V0KCdyZWNvdmVyX3R5cGUnLCBWYXVsdGllci5Mb3N0S2V5LnByb3RvKCkucmVjb3ZlclR5cGVbJ0RJU0FCTEUnXS52YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG1vZGVsLnNhdmVSZWNvcmQoKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvblRvKCdBdXRoTG9zdEtleVJlY292ZXJ5LmRpc2FibGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLm5vdGlmeSgnSG93IGVtYmFycmFzc2luZyEgVGhlcmUgd2FzIGFuIGVycm9yLCBwbGVhc2UgdHJ5IGFnYWluIGxhdGVyJywgJ2Vycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldCgnZXJyb3JzJykuY29uc29sZUVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICBBcHBsaWNhdGlvbkxvYWRlci5wcm9taXNlKHByb21pc2UpO1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG59KVxuO1xuXG5WYXVsdGllci5BdXRoTG9zdEtleVJlY292ZXJ5UmVzZXRDb250cm9sbGVyID0gRW1iZXIuQ29udHJvbGxlci5leHRlbmQoe1xuICAgICAgICBuZWVkczogWydhcHBsaWNhdGlvbiddLFxuICAgICAgICBtZW1iZXJzaGlwczogW10sXG4gICAgICAgIGNyZWF0ZWRfYnk6IG51bGwsXG4gICAgICAgIHB1YmxpY19rZXk6IG51bGxcbiAgICB9XG4pO1xuXG5WYXVsdGllci5BdXRoTG9zdEtleVJlY292ZXJ5UmVzZXRWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoe1xuICAgIHRlbXBsYXRlTmFtZTogJ0F1dGgvQXV0aExvc3RLZXlSZWNvdmVyeVJlc2V0JyxcbiAgICBsYXlvdXROYW1lOiAnTGF5b3V0L0xheW91dFN0YW5kYXJkJ1xufSk7XG5cbiIsIid1c2Ugc3RyaWN0JztcblxuVmF1bHRpZXIuQXV0aExvc3RLZXlSZWNvdmVyeVJlYnVpbGRSb3V0ZSA9IEVtYmVyLlJvdXRlLmV4dGVuZCh7XG5cbiAgICBhY3Rpb25zOiB7XG5cbiAgICAgICAgc2F2ZTogZnVuY3Rpb24gKGtleXMsIHJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5zZXQoJ2NvbnRyb2xsZXIua2V5cycsIGtleXMpO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLm1vZGVsRm9yKCdBdXRoTG9zdEtleVJlY292ZXJ5UmVidWlsZCcpO1xuICAgICAgICAgICAgY29udGVudC5zZXQoJ3B1YmxpY19rZXknLCBrZXlzLnB1YmxpY0tleSk7XG4gICAgICAgICAgICBjb250ZW50LnNldCgncmVjb3Zlcl90eXBlJywgVmF1bHRpZXIuTG9zdEtleS5wcm90bygpLnJlY292ZXJUeXBlWydSRUJVSUxEJ10udmFsdWUpO1xuXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IGNvbnRlbnQuc2F2ZVJlY29yZCgpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0KCdhdXRoJykubG9naW4ocmVzcG9uc2UuY3JlYXRlZF9ieS5lbWFpbCwga2V5cy5wcml2YXRlS2V5LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICQubm90aWZ5KCdZb3UgaGF2ZSBzdWNjZXNzZnVsbHkgcmVidWlsZCB5b3VyIG5ldyBwcml2YXRlIGtleScsICdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvblRvKCdBdXRoTG9zdEtleVJlY292ZXJ5LnN1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAkLm5vdGlmeSgnVGhlcmUgd2FzIGFuIGVycm9yIGR1cmluZyB1cGRhdGUgb2YgeW91ciBrZXksIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXInLCAnZXJyb3InKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXQoJ2Vycm9ycycpLmNvbnNvbGVFcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIEFwcGxpY2F0aW9uTG9hZGVyLnByb21pc2UocHJvbWlzZSk7XG4gICAgICAgICAgICByZXN1bHQucHJvbWlzZSA9IHByb21pc2U7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuVmF1bHRpZXIuQXV0aExvc3RLZXlSZWNvdmVyeVJlYnVpbGRDb250cm9sbGVyID0gRW1iZXIuQ29udHJvbGxlci5leHRlbmQoe1xuICAgIG5lZWRzOiBbJ0F1dGhMb3N0S2V5UmVjb3ZlcnknXSxcbiAgICBrZXlzOiBudWxsXG59KTtcblxuVmF1bHRpZXIuQXV0aExvc3RLZXlSZWNvdmVyeVJlYnVpbGRWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoe1xuICAgIHRlbXBsYXRlTmFtZTogJ0F1dGgvQXV0aExvc3RLZXlSZWNvdmVyeVJlYnVpbGQnLFxuICAgIGxheW91dE5hbWU6ICdMYXlvdXQvTGF5b3V0U3RhbmRhcmQnXG59KTtcblxuVmF1bHRpZXIuQXV0aExvc3RLZXlSZWNvdmVyeVN1Y2Nlc3NWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoe1xuICAgIHRlbXBsYXRlTmFtZTogJ0F1dGgvQXV0aExvc3RLZXlSZWNvdmVyeVN1Y2Nlc3MnLFxuICAgIGxheW91dE5hbWU6ICdMYXlvdXQvTGF5b3V0U3RhbmRhcmQnXG59KTsiLCIndXNlIHN0cmljdCc7XG5cblZhdWx0aWVyLkF1dGhMb3N0S2V5UmVjb3ZlcnlEaXNhYmxlUm91dGUgPSBFbWJlci5Sb3V0ZS5leHRlbmQoe1xuXG4gICAgYWN0aW9uczoge1xuICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5tb2RlbEZvcignQXV0aExvc3RLZXlSZWNvdmVyeURpc2FibGUnKTtcbiAgICAgICAgICAgIGNvbnRlbnQuc2V0KCdwdWJsaWNfa2V5JywgJy0nKTsgLy8gVGhpcyBjYW4ndCBiZSBhbiBlbXB0eSBzdHJpbmdcbiAgICAgICAgICAgIGNvbnRlbnQuc2V0KCdyZWNvdmVyX3R5cGUnLCBWYXVsdGllci5Mb3N0S2V5LnByb3RvKCkucmVjb3ZlclR5cGVbJ0RJU0FCTEUnXS52YWx1ZSk7XG5cbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gY29udGVudC5zYXZlUmVjb3JkKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uVG8oJ0F1dGhSZWdpc3RlcicpO1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICQubm90aWZ5KCdIb3cgZW1iYXJyYXNzaW5nISBUaGVyZSB3YXMgYW4gZXJyb3IgZHVyaW5nIHVwZGF0ZSBvZiB5b3VyIGtleSwgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlcicsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldCgnZXJyb3JzJykuY29uc29sZUVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgQXBwbGljYXRpb25Mb2FkZXIucHJvbWlzZShwcm9taXNlKTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5WYXVsdGllci5BdXRoTG9zdEtleVJlY292ZXJ5RGlzYWJsZUNvbnRyb2xsZXIgPSBFbWJlci5Db250cm9sbGVyLmV4dGVuZCh7XG4gICAgbmVlZHM6IFsnQXV0aExvc3RLZXlSZWNvdmVyeSddXG59KTtcblxuVmF1bHRpZXIuQXV0aExvc3RLZXlSZWNvdmVyeURpc2FibGVWaWV3ID0gRW1iZXIuVmlldy5leHRlbmQoe1xuICAgIHRlbXBsYXRlTmFtZTogJ0F1dGgvQXV0aExvc3RLZXlSZWNvdmVyeURpc2FibGUnLFxuICAgIGxheW91dE5hbWU6ICdMYXlvdXQvTGF5b3V0U3RhbmRhcmQnXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=